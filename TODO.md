# Learn Hub 项目任务规划

## 📋 项目阶段

### Phase 1: 后端核心（✅ 已完成）
- [x] 项目结构搭建
- [x] 数据模型设计
- [x] Repository 层实现
- [x] Service 层实现
- [x] Handler 层实现
- [x] 路由和中间件
- [x] 认证系统（JWT）
- [x] RBAC 权限体系
- [x] 数据库迁移工具
- [x] Swagger 文档生成

---

## Phase 2: 前端管理端（进行中 🚀）

### 2.1 项目初始化
- [x] 创建 Ant Design Pro 项目
- [x] 配置 TypeScript
- [x] 配置 ESLint + Prettier
- [x] 配置路由结构
- [x] 配置状态管理（Zustand）
- [x] 配置 HTTP 客户端（axios）
- [x] 配置环境变量

### 2.2 基础框架
- [x] 登录页面
- [ ] 注册页面
- [ ] 忘记密码页面
- [x] 主布局（侧边栏、顶部栏）
- [x] 菜单动态生成（基于权限）
- [x] 用户信息展示
- [x] 退出登录功能

### 2.3 资料管理模块
- [x] 资料列表页
  - [x] 分页查询
  - [x] 状态过滤
  - [ ] 搜索功能
- [ ] 资料详情页
- [x] 创建资料页
  - [x] 表单验证
  - [ ] 文件上传
  - [ ] 富文本编辑器
- [x] 编辑资料页
- [x] 删除资料（确认对话框）
- [ ] 发布/草稿状态切换

### 2.4 题库管理模块
- [x] 题库列表页
  - [x] 分页查询
  - [x] 题型过滤
  - [ ] 搜索功能
- [ ] 题目详情页
- [x] 创建题目页
  - [x] 单选题表单
  - [x] 多选题表单
  - [x] 填空题表单
  - [ ] 选项管理
- [x] 编辑题目页
- [x] 删除题目
- [ ] 批量导入题目

### 2.5 考试管理模块
- [x] 试卷列表页
  - [x] 分页查询
  - [x] 状态过滤
- [ ] 试卷详情页
  - [ ] 显示试卷信息
  - [ ] 显示关联题目
- [x] 创建试卷页
  - [x] 基本信息表单
  - [ ] 题目选择（表格选择）
  - [ ] 题目排序
- [x] 编辑试卷页
- [x] 删除试卷
- [ ] 发布试卷

### 2.6 用户管理模块
- [x] 用户列表页
  - [x] 分页查询
  - [ ] 搜索功能
  - [x] 状态过滤
- [ ] 用户详情页
- [x] 创建用户页
- [x] 编辑用户页
- [x] 删除用户
- [ ] 分配角色
- [ ] 重置密码

### 2.7 角色权限管理
- [x] 角色列表页
- [x] 创建角色页
- [x] 编辑角色页
- [x] 删除角色
- [x] 权限分配页
  - [x] 权限树形展示
  - [x] 权限勾选
- [ ] 菜单分配页

### 2.8 数据统计模块
- [ ] 学习统计页
  - [ ] 用户学习进度
  - [ ] 完成率统计
  - [ ] 图表展示
- [ ] 考试统计页
  - [ ] 考试参与人数
  - [ ] 平均分统计
  - [ ] 及格率统计
  - [ ] 图表展示
- [ ] 用户活跃度统计

### 2.9 系统设置
- [ ] 个人设置页
  - [ ] 修改昵称
  - [ ] 修改密码
  - [ ] 头像上传
- [ ] 系统配置页（可选）

### 2.10 测试和优化
- [ ] 单元测试
- [ ] 集成测试
- [ ] 性能优化
- [ ] 响应式设计优化
- [ ] 无障碍访问优化

---

## Phase 3: 前端用户端（待开始）

### 3.1 项目初始化
- [ ] 创建 Taro + React 项目
- [ ] 配置 TypeScript
- [ ] 配置 ESLint + Prettier
- [ ] 配置路由结构
- [ ] 配置状态管理
- [ ] 配置 HTTP 客户端
- [ ] 配置环境变量

### 3.2 基础框架
- [ ] 登录页面
- [ ] 注册页面
- [ ] 主页/首页
- [ ] 底部导航栏
- [ ] 用户信息页

### 3.3 学习模块
- [ ] 资料列表页
  - [ ] 分页加载
  - [ ] 搜索功能
  - [ ] 分类过滤
- [ ] 资料详情页
  - [ ] 内容展示
  - [ ] 视频播放
  - [ ] 进度记录
  - [ ] 标记完成
- [ ] 学习进度页
  - [ ] 进度条展示
  - [ ] 完成统计

### 3.4 考试模块
- [ ] 试卷列表页
  - [ ] 分页加载
  - [ ] 搜索功能
- [ ] 试卷详情页
  - [ ] 试卷信息展示
  - [ ] 开始考试按钮
- [ ] 做题页面
  - [ ] 题目展示
  - [ ] 单选题交互
  - [ ] 多选题交互
  - [ ] 填空题交互
  - [ ] 上一题/下一题导航
  - [ ] 题目列表快速跳转
  - [ ] 倒计时显示
  - [ ] 自动保存答题进度
- [ ] 成绩查看页
  - [ ] 成绩显示
  - [ ] 是否及格
  - [ ] 错题回顾
  - [ ] 答题详情

### 3.5 个人中心
- [ ] 个人信息页
  - [ ] 显示用户信息
  - [ ] 修改昵称
  - [ ] 修改密码
  - [ ] 头像上传
- [ ] 学习记录页
  - [ ] 学习历史
  - [ ] 考试历史
  - [ ] 成绩统计
- [ ] 我的收藏（可选）

### 3.6 测试和优化
- [ ] 单元测试
- [ ] 集成测试
- [ ] 性能优化
- [ ] 移动端适配
- [ ] 离线功能（可选）

---

## Phase 4: 后端必要功能（待开始）

### 4.1 核心功能完成
- [ ] 实现 RefreshToken 逻辑（auth.go）
- [ ] 实现 initDefaultData 初始化数据（cmd/migrate/main.go）
  - [ ] 创建默认角色（user, admin, system_admin）
  - [ ] 创建默认权限（materials, questions, exams, users 等）
  - [ ] 创建默认菜单
  - [ ] 创建默认管理员账户

### 4.2 文件上传（必要）
- [ ] 集成 OSS（阿里云/腾讯云）
- [ ] 文件上传接口
- [ ] 文件删除接口
- [ ] 文件预签名 URL 生成
- [ ] 文件大小限制
- [ ] 文件类型验证

### 4.3 数据导入导出（必要）
- [ ] 题目批量导入（Excel）
- [ ] 用户批量导入（Excel）
- [ ] 考试成绩导出

### 4.4 高级功能（可选）
- [ ] 学习计划功能
- [ ] 消息通知功能
- [ ] 积分系统
- [ ] 成长体系
- [ ] 排行榜

### 4.5 性能优化（可选）
- [ ] 数据库查询优化
- [ ] 缓存策略（Redis）
- [ ] 接口响应时间优化
- [ ] 数据库连接池优化

### 4.6 安全加固（可选）
- [ ] 速率限制
- [ ] SQL 注入防护
- [ ] XSS 防护
- [ ] CSRF 防护
- [ ] 密码强度要求
- [ ] 登录失败锁定

---

## Phase 5: 测试和部署（待开始）

### 5.1 测试
- [ ] 后端单元测试（覆盖率 ≥ 70%）
- [ ] 后端集成测试
- [ ] 前端单元测试
- [ ] 前端集成测试
- [ ] E2E 测试
- [ ] 性能测试
- [ ] 安全测试

### 5.2 文档
- [ ] API 文档完善
- [ ] 前端开发文档
- [ ] 后端开发文档
- [ ] 部署文档
- [ ] 用户手册
- [ ] 管理员手册

### 5.3 CI/CD
- [ ] GitHub Actions 配置
- [ ] 自动化测试流程
- [ ] 自动化构建流程
- [ ] 自动化部署流程

### 5.4 部署
- [ ] 开发环境部署
- [ ] 测试环境部署
- [ ] 生产环境部署
- [ ] 域名配置
- [ ] SSL 证书配置
- [ ] 监控和告警配置

### 5.5 上线前检查
- [ ] 功能完整性检查
- [ ] 性能基准测试
- [ ] 安全审计
- [ ] 用户验收测试（UAT）

---

## Phase 6: 运维和维护（待开始）

### 6.1 监控和日志
- [ ] 应用性能监控（APM）
- [ ] 日志聚合
- [ ] 错误追踪
- [ ] 用户行为分析

### 6.2 备份和恢复
- [ ] 数据库备份策略
- [ ] 备份恢复测试
- [ ] 灾难恢复计划

### 6.3 用户支持
- [ ] 常见问题文档
- [ ] 用户反馈渠道
- [ ] Bug 修复流程
- [ ] 功能迭代计划

---

## 📊 优先级和时间估算

| 阶段 | 优先级 | 预计工时 | 状态 |
|------|--------|---------|------|
| Phase 1 - 后端核心 | 🔴 高 | 40h | ✅ 完成 |
| Phase 2 - 管理端 | 🔴 高 | 60h | 🚀 进行中 (70%) |
| Phase 3 - 用户端 | 🔴 高 | 50h | ⏳ 待开始 |
| Phase 4 - 后端必要功能 | 🔴 高 | 20h | ⏳ 待开始 |
| Phase 5 - 测试部署 | 🔴 高 | 40h | ⏳ 待开始 |
| Phase 6 - 运维维护 | 🟢 低 | 20h | ⏳ 待开始 |

**总计预计工时：230 小时**  
**已完成工时：40h (17%)**  
**进行中工时：42h (18%)**

---

## 🎯 关键里程碑

- [ ] **Milestone 1** - 后端 API 完成（已完成）
- [ ] **Milestone 2** - 管理端基础框架完成（预计 1 周）
- [ ] **Milestone 3** - 用户端基础框架完成（预计 1 周）
- [ ] **Milestone 4** - 核心功能完成（预计 2 周）
- [ ] **Milestone 5** - 测试和优化完成（预计 1 周）
- [ ] **Milestone 6** - 上线部署（预计 1 周）

---

## 🔍 质量检查清单

### 代码质量
- [ ] 代码审查完成
- [ ] 代码覆盖率 ≥ 70%
- [ ] 无 TODO 注释
- [ ] 无硬编码配置

### 功能完整性
- [ ] 所有需求功能已实现
- [ ] 所有 API 已测试
- [ ] 所有页面已测试
- [ ] 所有流程已验证

### 性能指标
- [ ] API 响应时间 < 500ms
- [ ] 页面加载时间 < 3s
- [ ] 数据库查询优化
- [ ] 缓存命中率 > 80%

### 安全指标
- [ ] 无 SQL 注入漏洞
- [ ] 无 XSS 漏洞
- [ ] 无认证绕过
- [ ] 无权限提升漏洞

### 用户体验
- [ ] 响应式设计完成
- [ ] 无障碍访问支持
- [ ] 错误提示清晰
- [ ] 加载状态提示

---

## 📝 备注

### 可选功能（Phase 2+ 后考虑）
- 学习计划功能
- 消息通知系统
- 积分和成长体系
- 排行榜功能
- 离线做题功能
- 题目批量导入
- 数据导出功能

### 技术债务
- 需要补充单元测试
- 需要优化数据库查询
- 需要添加缓存层
- 需要完善错误处理

### 已知问题
- 暂无

---

## 🚀 快速开始下一步

### 立即开始 Phase 2（管理端）
```bash
# 创建 Ant Design Pro 项目
npx create-umi@latest frontend-admin

# 或使用官方模板
git clone https://github.com/ant-design/ant-design-pro.git frontend-admin
```

### 立即开始 Phase 3（用户端）
```bash
# 创建 Taro 项目
npm init taro@latest frontend-user -- --typescript --css tailwind
```

---

**最后更新**：2025-11-14  
**项目状态**：Phase 1 完成，准备开始 Phase 2
